name: assembly::epc-ns::1.0.3
description: upgrade step 3 remove dublin aggregation
properties:
  edge-location-1:
    type: string
    default: local
  edge-location-2:
    type: string
    default: local
  edge-location-3:
    type: string
    default: local
  agg-location-1:
    type: string
    default: local
  agg-location-2:
    type: string
    default: local
  core-location:
    type: string
    default: local
composition:
  epc-aggregation-cork:
    properties:
      mgmt-network-name:
        value: ${mgmt-network.name}
      s1-network-name:
        value: ${s1-network.name}
      internal-network-name:
        value: ${internal-network.name}
      deploymentLocation:
        value: ${agg-location-1}
    type: assembly::aggregation-epc-location::1.0
  epc-aggregation-london:
    properties:
      mgmt-network-name:
        value: ${mgmt-network.name}
      s1-network-name:
        value: ${s1-network.name}
      internal-network-name:
        value: ${internal-network.name}
      deploymentLocation:
        value: ${agg-location-1}
    type: assembly::aggregation-epc-location::1.0
  enb1:
    properties:
      deploymentLocation:
        value: ${edge-location-1}
      s1-network-name:
        value: ${s1-network.name}
      mgmt-network-name:
        value: ${mgmt-network.name}
    type: assembly::enb-vnf::1.0
  enb2:
    properties:
      deploymentLocation:
        value: ${edge-location-2}
      s1-network-name:
        value: ${s1-network.name}
      mgmt-network-name:
        value: ${mgmt-network.name}
    type: assembly::enb-vnf::1.0
  enb3:
    properties:
      deploymentLocation:
        value: ${edge-location-3}
      s1-network-name:
        value: ${s1-network.name}
      mgmt-network-name:
        value: ${mgmt-network.name}
    type: assembly::enb-vnf::1.0
  core-epc-eu:
    properties:
      mgmt-network-name:
        value: ${mgmt-network.name}
      sg-network-name:
        value: ${sg-network.name}
      internal-network-name:
        value: ${internal-network.name}
    type: assembly::core-epc-location::1.0
references:
  mgmt-network:
    properties:
      name:
        value: mgmt-network
    type: assembly::logical-network::1.0
  s1-network:
    properties:
      name:
        value: s1-network
    type: assembly::logical-network::1.0
  internal-network:
    properties:
      name:
        value: internal-network
    type: assembly::logical-network::1.0
  sg-network:
    properties:
      name:
        value: sg-network
    type: assembly::logical-network::1.0
relationships:
  enb3-s1:
    properties:
      name:
        value: s1
    lifecycle:
      Create:
      - target.attach_sgw
      - target.attach_mme
      Cease:
      - target.detach_sgw
      - target.detach_mme
    source-state: Active
    source-state-modifier: post
    target-state: Active
    target-state-modifier: post
    source-capabilities:
    - enb3.capability
    target-requirements:
    - epc-aggregation-london.requirement
  cork-eu:
    properties:
      name:
        value: epc
    lifecycle:
      Create:
      - target.attach_hss
      - target.attach_pgw
      Cease:
      - target.detach_hss
      - target.detach_pgw
    source-state: Active
    source-state-modifier: post
    target-state: Active
    target-state-modifier: post
    source-capabilities:
    - epc-aggregation-cork.capability
    target-requirements:
    - core-epc-eu.requirement
  london-eu:
    properties:
      name:
        value: epc
    lifecycle:
      Create:
      - target.attach_hss
      - target.attach_pgw
      Cease:
      - target.detach_hss
      - target.detach_pgw
    source-state: Active
    source-state-modifier: post
    target-state: Active
    target-state-modifier: post
    source-capabilities:
    - epc-aggregation-london.capability
    target-requirements:
    - core-epc-eu.requirement
  enb1-s1-cork:
    properties:
      name:
        value: s1
    lifecycle:
      Create:
      - target.attach_sgw
      - target.attach_mme
      Cease:
      - target.detach_sgw
      - target.detach_mme
    source-state: Active
    source-state-modifier: post
    target-state: Active
    target-state-modifier: post
    source-capabilities:
    - enb1.capability
    target-requirements:
    - epc-aggregation-cork.requirement
  enb2-s1-cork:
    properties:
      name:
        value: s1
    lifecycle:
      Create:
      - target.attach_sgw
      - target.attach_mme
      Cease:
      - target.detach_sgw
      - target.detach_mme
    source-state: Active
    source-state-modifier: post
    target-state: Active
    target-state-modifier: post
    source-capabilities:
    - enb2.capability
    target-requirements:
    - epc-aggregation-cork.requirement
designerLayout:
  description: The following information is solely used to determine the presentation
    of this Assembly Design in the LM UI. It does not form part of operational/behavioural
    description of the Assembly and should not be edited directly.
  elements:
    epc-aggregation-cork:
      x: 678
      y: 40
    epc-aggregation-london:
      x: 676.6666870117188
      y: 244
    enb1:
      x: 350
      y: 72
    enb2:
      x: 338
      y: 281.33331298828125
    enb3:
      x: 356.66668701171875
      y: 441.3333282470703
    core-epc-eu:
      x: 1056.6666259765625
      y: 46.66667175292969
    mgmt-network:
      x: 584.6666259765625
      y: 634.6666259765625
    s1-network:
      x: 360.6666259765625
      y: 637.3333740234375
    internal-network:
      x: 801.9999389648438
      y: 629.3333587646484
    sg-network:
      x: 1031.3333740234375
      y: 613.3333435058594
    assembly::epc-ns::1.0.3:
      x: 0
      y: 180
